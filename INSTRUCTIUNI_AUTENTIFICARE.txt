===================================================================
            INSTRUCÈšIUNI IMPLEMENTARE SISTEM AUTENTIFICARE
               Pentru Single Page App - Dissertation Registration
===================================================================

ğŸ“‹ OBIECTIV:
- PaginÄƒ de login obligatorie la prima intrare
- DublÄƒ autentificare: clasicÄƒ (email/parolÄƒ) + Auth0
- Protejarea tuturor rutelor pÃ¢nÄƒ la autentificare
- Salvare utilizatori Ã®n MongoDB Atlas

===================================================================
                            ğŸ¯ PASUL 1: BACKEND
===================================================================

1.1 PACHETE DE INSTALAT:
   npm install bcryptjs jsonwebtoken express-validator cors

1.2 MODELE MONGOOSE DE CREAT:
   - User.js Ã®n backend/models/
   - CÃ¢mpuri: email, password (hash), name, provider (local/auth0), auth0Id, 
             userType (enum: 'student', 'profesor'), 
             studentDetails: { universityId, faculty, year, specialization },
             professorDetails: { department, title, researchAreas },
             isVerified, createdAt, updatedAt

1.3 MIDDLEWARE-URI DE CREAT:
   - auth.js - verificÄƒ JWT token
   - validation.js - valideazÄƒ datele de input

1.4 RUTE API DE IMPLEMENTAT Ã®n backend/routes/:
   - POST /api/auth/register - Ã®nregistrare clasicÄƒ (cu selecÈ›ie tip cont)
   - POST /api/auth/login - login clasic  
   - GET /api/auth/verify - verificÄƒ validitatea token-ului
   - POST /api/auth/auth0 - proceseazÄƒ login Auth0
   - GET /api/auth/profile - profil utilizator autentificat
   - PUT /api/auth/complete-profile - completare detalii dupÄƒ prima logare
   - GET /api/users/students - listÄƒ studenÈ›i (doar pentru profesori)
   - GET /api/users/professors - listÄƒ profesori (pentru toÈ›i)

1.5 LOGICA BACKEND:
   - Hash parole cu bcryptjs (salt rounds: 12)
   - Generare JWT cu expirare (24h recomandat) + include userType Ã®n payload
   - Validare email format + parolÄƒ minimÄƒ 6 caractere
   - Verificare utilizator existent la Ã®nregistrare
   - Suport pentru utilizatori Auth0 (salvare Ã®n aceeaÈ™i tabelÄƒ)
   - Middleware pentru verificare tip utilizator (roleCheck)
   - Validare email universitar pentru studenÈ›i (@stud.ase.ro, etc.)
   - Sistem de aprobare conturi profesori (opÈ›ional)

===================================================================
                    ğŸ” DETECÈšIE AUTOMATÄ‚ TIP UTILIZATOR PE EMAIL
===================================================================

ğŸ“§ LOGICA VALIDÄ‚RII EMAIL:

ğŸ“ DOMENII STUDENÈšI (userType: 'student'):
   - @stud.ase.ro (ASE BucureÈ™ti - studenÈ›i)
   - @student.ase.ro 
   - @student.upt.ro (UPT TimiÈ™oara)
   - @student.utcluj.ro (UTC Cluj)
   - @stud.ubbcluj.ro (UBB Cluj)
   - @student.upb.ro (UPB BucureÈ™ti)
   
ğŸ‘¨â€ğŸ« DOMENII PROFESORI (userType: 'profesor'):
   - @ase.ro (ASE BucureÈ™ti - cadre didactice)
   - @ie.ase.ro (ASE - Informatica EconomicÄƒ)
   - @profesor.ase.ro
   - @upt.ro (UPT TimiÈ™oara)
   - @utcluj.ro (UTC Cluj)
   - @ubbcluj.ro (UBB Cluj)
   - @upb.ro (UPB BucureÈ™ti)

âš™ï¸ IMPLEMENTARE BACKEND:
   1. FuncÈ›ie validateEmailDomain(email) Ã®n utils/
   2. ReturneazÄƒ { isValid: true/false, userType: 'student'/'profesor' }
   3. Validare automatÄƒ la Ã®nregistrare - NU mai e nevoie sÄƒ aleagÄƒ utilizatorul
   4. Mesaj de eroare dacÄƒ email-ul nu e de la o universitate acceptatÄƒ

ğŸ–¥ï¸ IMPLEMENTARE FRONTEND:
   1. Remove radio buttons pentru tipul de cont din formularul de Ã®nregistrare
   2. AfiÈ™eazÄƒ mesaj informativ: "Tipul de cont se determinÄƒ automat pe baza email-ului"
   3. Validare Ã®n timp real pe cÃ¢mpul email (verificÄƒ dacÄƒ e valid Ã®nainte de submit)
   4. Mesaje clare de eroare: "FoloseÈ™te email-ul universitÄƒÈ›ii pentru Ã®nregistrare"

ğŸ“ FLOW ÃMBUNÄ‚TÄ‚ÈšIT:
   1. Utilizator introduce email Ã®n formular
   2. Sistem detecteazÄƒ automat dacÄƒ e student sau profesor
   3. AfiÈ™eazÄƒ cÃ¢mpuri specifice tipului detectat
   4. Validare finalÄƒ pe backend
   5. Ãnregistrare cu tipul corect automat

===================================================================
                          ğŸ–¥ï¸ PASUL 2: FRONTEND
===================================================================

2.1 PACHETE DE INSTALAT:
   npm install @auth0/auth0-react axios react-router-dom

2.2 CONTEXT È˜I STATE MANAGEMENT:
   - Extinde AuthContext.js pentru gestionarea stÄƒrii globale
   - State: { user, token, isAuthenticated, loading, loginType, userType, permissions }
   - Actions: login, logout, register, checkAuth, updateProfile
   - Permissions bazate pe userType (student vs profesor)

2.3 COMPONENTE DE CREAT/MODIFICAT:

   A) ProtectedRoute.js - componentÄƒ care:
      - VerificÄƒ dacÄƒ utilizatorul e autentificat
      - RedirecÈ›ioneazÄƒ la login dacÄƒ nu
      - AfiÈ™eazÄƒ spinner pe loading   B) LoginPage.js - paginÄƒ principalÄƒ cu:
      - Tab-uri pentru Login/Create Account
      - Buton "Login with Auth0"
      - Design modern, centrat pe paginÄƒ
      - Mesaj informativ despre detecÈ›ia automatÄƒ tip cont

   C) ClassicAuth.js - formular clasic:
      - LOGIN: Email + parolÄƒ
      - CREATE ACCOUNT: Email + nume + parolÄƒ + confirmare
      - FÄ‚RÄ‚ selecÈ›ie tip cont - detecÈ›ie automatÄƒ pe email
      - Validare email universitar Ã®n timp real
      - AfiÈ™are cÃ¢mpuri specifice dupÄƒ detecÈ›ia tipului
      - Loading states È™i mesaje de eroare clare

   D) ProfileCompletion.js - componentÄƒ pentru completarea profilului:
      - AfiÈ™atÄƒ dupÄƒ prima logare dacÄƒ lipsesc detalii
      - Formulare diferite pentru student vs profesor
      - Obligatorie pentru acces complet la aplicaÈ›ie

   E) RoleBasedRoute.js - componentÄƒ pentru rute bazate pe rol:
      - VerificÄƒ nu doar autentificare, ci È™i tipul de utilizator
      - RedirecÈ›ioneazÄƒ la pagini specifice rolului

2.4 ROUTING STRUCTURE Ã®n App.js:
   - Toate rutele wrappate Ã®n ProtectedRoute (exceptÃ¢nd login)
   - RutÄƒ publicÄƒ: /login
   - Rute protejate comune: /, /profile
   - Rute specifice studenÈ›i: /my-dissertation, /browse-topics, /applications
   - Rute specifice profesori: /manage-topics, /student-applications, /my-students
   - RutÄƒ completare profil: /complete-profile (obligatorie dupÄƒ prima logare)

===================================================================
                            ğŸ” PASUL 3: AUTH0
===================================================================

3.1 CONFIGURARE AUTH0 DASHBOARD:
   - CreeazÄƒ cont gratuÃ¯t pe auth0.com
   - CreeazÄƒ "Single Page Application"
   - SeteazÄƒ Allowed Callback URLs: http://localhost:3000
   - SeteazÄƒ Allowed Logout URLs: http://localhost:3000/login
   - Allowed Web Origins: http://localhost:3000

3.2 CONFIGURARE FRONTEND:
   - WrappeazÄƒ App Ã®n Auth0Provider Ã®n index.js
   - ConfigureazÄƒ domain È™i clientId din Auth0 dashboard
   - SeteazÄƒ redirectUri: window.location.origin

3.3 INTEGRARE CU BACKEND:
   - DupÄƒ login Auth0, trimite userInfo la backend
   - Backend salveazÄƒ utilizatorul Auth0 Ã®n MongoDB
   - ReturneazÄƒ JWT custom pentru consistency

===================================================================
                         ğŸ”„ PASUL 4: FLOW COMPLET
===================================================================

4.1 FLOW AUTENTIFICARE:
   1. Utilizator intrÄƒ pe site -> redirecÈ›ionat la /login
   2. Alege Login SAU Create Account (tipul se detecteazÄƒ automat)
   3. Introduce email -> sistem detecteazÄƒ student/profesor automat
   4. DupÄƒ succes -> JWT salvat Ã®n localStorage (cu userType detectat)
   5. Verificare profil complet -> dacÄƒ nu, redirecÈ›ionare /complete-profile
   6. DupÄƒ profil complet -> redirecÈ›ionare la dashboard specific rolului
   7. Toate request-urile ulterioare includ JWT Ã®n headers

4.2 PERSISTENÈšA SESIUNII:
   - JWT Ã®n localStorage (cu expirare)
   - Check automat la refresh paginÄƒ
   - Logout automat la expirarea token-ului

4.3 SECURITATE:
   - Toate parolele hash-uite cu bcrypt
   - JWT cu secret tare (din .env)
   - Validare input pe backend
   - CORS configurat corect
   - Sanitizare date utilizator

===================================================================
                          ğŸ“ PASUL 5: STRUCTURA
===================================================================

BACKEND - Foldere noi de creat:
backend/
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ User.js
â”‚   â””â”€â”€ DissertationTopic.js (pentru viitor)
â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ auth.js
â”‚   â””â”€â”€ users.js
â”œâ”€â”€ middleware/
â”‚   â”œâ”€â”€ auth.js
â”‚   â”œâ”€â”€ roleCheck.js (nou - verificÄƒ tipul utilizatorului)
â”‚   â””â”€â”€ validation.js
â””â”€â”€ utils/
    â””â”€â”€ jwt.js

FRONTEND - Componente noi:
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”œâ”€â”€ LoginPage.js
â”‚   â”‚   â”œâ”€â”€ ClassicAuth.js
â”‚   â”‚   â”œâ”€â”€ ProfileCompletion.js (nou)
â”‚   â”‚   â”œâ”€â”€ ProtectedRoute.js
â”‚   â”‚   â””â”€â”€ RoleBasedRoute.js (nou)
â”‚   â”œâ”€â”€ student/ (nou)
â”‚   â”‚   â”œâ”€â”€ StudentDashboard.js
â”‚   â”‚   â””â”€â”€ BrowseTopics.js
â”‚   â”œâ”€â”€ professor/ (nou)
â”‚   â”‚   â”œâ”€â”€ ProfessorDashboard.js
â”‚   â”‚   â””â”€â”€ ManageTopics.js
â”‚   â””â”€â”€ layout/
â”‚       â”œâ”€â”€ Header.js (cu meniu diferit pe rol)
â”‚       â””â”€â”€ Navigation.js
â”œâ”€â”€ services/
â”‚   â””â”€â”€ api.js
â””â”€â”€ utils/    â””â”€â”€ auth.js

===================================================================
                        ğŸ‘¥ TIPURI DE UTILIZATORI È˜I PERMISIUNI
===================================================================

ğŸ“ STUDENT:
   Permisiuni:
   - Vizualizare teme disponibile de disertaÈ›ie
   - Aplicare la teme (cu limitÄƒ de aplicÄƒri simultane)
   - Vizualizare propriei aplicÄƒri/disertaÈ›ii
   - Chat cu profesorul coordonator
   - Upload documente (planificare, draft-uri)
   
   CÃ¢mpuri obligatorii la Ã®nregistrare:
   - Email universitar (@stud.ase.ro, @student.upt.ro, etc.)
   - ID Student / NumÄƒr matricol
   - Facultate
   - Anul de studiu
   - Specializarea

ğŸ‘¨â€ğŸ« PROFESOR:
   Permisiuni:
   - Creare È™i gestionare teme de disertaÈ›ie
   - Vizualizare aplicÄƒri studenÈ›i
   - Acceptare/respingere aplicÄƒri
   - Gestionare studenÈ›i coordonaÈ›i
   - Stabilire Ã®ntÃ¢lniri È™i deadline-uri
   - Evaluare progres studenÈ›i
   
   CÃ¢mpuri obligatorii la Ã®nregistrare:
   - Email instituÈ›ional (@ase.ro, @upt.ro, etc.)
   - Departament/Catedra
   - Titlul academic (Lect. Dr., Conf. Dr., Prof. Dr.)
   - Domenii de cercetare
   - CV/Bio scurt

ğŸ” SISTEM PERMISIUNI:
   - Middleware roleCheck verificÄƒ userType Ã®n JWT
   - Rute API protejate pe baza rolului
   - Frontend afiÈ™eazÄƒ interfeÈ›e diferite
   - ValidÄƒri suplimentare pe backend pentru acÈ›iuni critice

===================================================================
                         âš™ï¸ PASUL 6: CONFIGURARE
===================================================================

6.1 VARIABILE ENVIRONMENT (.env backend):
   MONGO_URI=... (deja ai)
   JWT_SECRET=... (deja ai)
   PORT=5000 (deja ai)
   AUTH0_DOMAIN=your-auth0-domain
   AUTH0_AUDIENCE=your-api-identifier

6.2 VARIABILE ENVIRONMENT (.env frontend - nou):
   CreeazÄƒ .env Ã®n dissertation-registration/:
   REACT_APP_API_URL=http://localhost:5000
   REACT_APP_AUTH0_DOMAIN=your-auth0-domain
   REACT_APP_AUTH0_CLIENT_ID=your-client-id

===================================================================
                        ğŸ§ª PASUL 7: TESTARE
===================================================================

1. Test Ã®nregistrare clasicÄƒ
2. Test login clasic
3. Test Auth0 login
4. Test protejare rute
5. Test persistenÈ›Äƒ sesiune (refresh)
8. Test logout
9. Test expirare token
10. Test permisiuni specifice pe rol (student vs profesor)
11. Test validare email universitar
12. Test completare profil obligatorie

===================================================================
                         ğŸ“ OBSERVAÈšII IMPORTANTE
===================================================================

âš ï¸ ORDINEA IMPLEMENTÄ‚RII (recomandat):
1. Modelul User È™i rutele backend clasice
2. Frontend clasic (email/parolÄƒ)
3. Protejarea rutelor
4. Integrarea Auth0
5. Finisarea UI/UX

ğŸ”§ TEHNOLOGII FOLOSITE:
- Backend: Express + Mongoose + bcryptjs + jsonwebtoken
- Frontend: React + Auth0 + axios + react-router-dom
- Database: MongoDB Atlas (deja configurat)

ğŸ’¡ TIPS:
- TesteazÄƒ fiecare pas separat Ã®nainte sÄƒ treci la urmÄƒtorul
- Èšine console-ul deschis pentru debugging
- FoloseÈ™te Postman pentru testarea API-urilor
- Auth0 are documentaÈ›ie excelentÄƒ pentru React

===================================================================

Succes cu implementarea! ğŸš€
DacÄƒ Ã®ntÃ¢mpini probleme la vreun pas, poÈ›i sÄƒ-mi spui È™i te ajut specific.
